/*global
 define
 */
/*jslint
 browser: true,
 white: true
 */
define([
    'kb.html',
    'kb.runtime',
    'q',
    'underscore',
    'kb.widget.vis.treechart'],
    function (html, R, q, _) {
        'use strict';

        function treechartWidget() {

            function widget(config) {

                var mount, container;


                function render() {

                    var tree = {"distance":1.938459241,"id":"node_4","children":[{"distance":1.376457276,"id":"node_5","children":[{"distance":1.7922364290000001,"id":"node_6","children":[{"distance":1.9082142429999998,"id":"node_7","children":[{"distance":1.0016564140000002,"id":"node_8","children":[{"distance":1.0082073839999999,"id":"node_9","rowPos":552,"name":"b3860 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"},{"distance":1.0082073839999999,"id":"node_10","rowPos":2708,"name":"b0208 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"},{"distance":0.5233165272,"id":"node_11","children":[{"distance":1.486547271,"id":"node_12","rowPos":3302,"name":"b2063 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"},{"distance":1.486547271,"id":"node_13","rowPos":3826,"name":"b3858 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"},{"distance":0.8412192958,"id":"node_14","children":[{"distance":1.3903651149999998,"id":"node_15","children":[{"distance":1.68649363,"id":"node_16","rowPos":2360,"name":"b2965 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"},{"distance":1.68649363,"id":"node_17","rowPos":3004,"name":"b4521 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"},{"distance":0.9196819008,"id":"node_18","children":[{"distance":1.1576570240000001,"id":"node_19","children":[{"distance":0.9995198202,"id":"node_20","rowPos":4162,"name":"b2473 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"},{"distance":0.3005282187,"id":"node_21","children":[{"distance":0.6989916016,"id":"node_22","rowPos":1541,"name":"b1051 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"},{"distance":0.6989916016,"id":"node_23","rowPos":1940,"name":"b4005 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"},{"distance":0.6173554178,"id":"node_24","children":[{"distance":1.539821426,"id":"node_25","rowPos":4037,"name":"b4518 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"},{"distance":0.8294065316,"id":"node_26","children":[{"distance":0.7104148946,"id":"node_27","rowPos":276,"name":"b0033 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"},{"distance":0.7104148946,"id":"node_28","rowPos":1823,"name":"b0708 (64)","clusterPos":64,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"","open":true,"weight":3,"lineStroke":"#000aff"}],"clusterPos":"64","name":"cluster_64","open":false},{"distance":0.3021339434,"id":"node_29","children":[{"distance":1.12832085,"id":"node_30","children":[{"distance":1.114624996,"id":"node_31","children":[{"distance":1.414596951,"id":"node_32","children":[{"distance":1.102751795,"id":"node_33","children":[{"distance":0.32128864690000003,"id":"node_34","children":[{"distance":0.32659728800000004,"id":"node_35","rowPos":1943,"name":"b4006 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.32659728800000004,"id":"node_36","rowPos":1969,"name":"b4244 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.1559698469,"id":"node_37","children":[{"distance":0.49191608800000003,"id":"node_38","rowPos":275,"name":"b0032 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.27054579419999997,"id":"node_39","children":[{"distance":0.2213702938,"id":"node_40","rowPos":1939,"name":"b2476 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.2213702938,"id":"node_41","rowPos":1962,"name":"b4245 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.4321463447,"id":"node_42","children":[{"distance":1.318491385,"id":"node_43","rowPos":1717,"name":"b1482 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.4765368742,"id":"node_44","children":[{"distance":0.8419545107999999,"id":"node_45","rowPos":2370,"name":"b1480 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.8419545107999999,"id":"node_46","rowPos":3215,"name":"b1783 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.41403754690000005,"id":"node_47","children":[{"distance":1.112441842,"id":"node_48","children":[{"distance":0.8077857597,"id":"node_49","children":[{"distance":0.8309695327,"id":"node_50","rowPos":3089,"name":"b1428 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.8309695327,"id":"node_51","rowPos":3691,"name":"b3356 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.2533536077,"id":"node_52","children":[{"distance":0.8206270159,"id":"node_53","children":[{"distance":0.5647746687,"id":"node_54","rowPos":2273,"name":"b0397 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.5647746687,"id":"node_55","rowPos":2869,"name":"b0710 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.5663568321,"id":"node_56","children":[{"distance":0.8190448525,"id":"node_57","rowPos":926,"name":"b3869 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.8190448525,"id":"node_58","rowPos":3610,"name":"b3001 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.7895972065,"id":"node_59","children":[{"distance":1.219541215,"id":"node_60","children":[{"distance":0.7420587129,"id":"node_61","rowPos":610,"name":"b2927 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.7420587129,"id":"node_62","rowPos":2927,"name":"b0866 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.8135331682,"id":"node_63","children":[{"distance":0.6174569305000001,"id":"node_64","children":[{"distance":0.5306098289,"id":"node_65","rowPos":1773,"name":"b2908 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.5306098289,"id":"node_66","rowPos":2840,"name":"b0643 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.1365733057,"id":"node_67","children":[{"distance":0.4862423141,"id":"node_68","children":[{"distance":0.5252511397,"id":"node_69","rowPos":923,"name":"b3868 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.5252511397,"id":"node_70","rowPos":1361,"name":"b4024 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.3908505488,"id":"node_71","children":[{"distance":0.620642905,"id":"node_72","rowPos":120,"name":"b3210 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.620642905,"id":"node_73","rowPos":965,"name":"b0200 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.4455461505,"id":"node_74","children":[{"distance":1.4255362160000002,"id":"node_75","children":[{"distance":0.6130064666,"id":"node_76","children":[{"distance":0.9870079816,"id":"node_77","children":[{"distance":0.3425072106,"id":"node_78","children":[{"distance":0.4662556515,"id":"node_79","rowPos":1934,"name":"b2416 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.4662556515,"id":"node_80","rowPos":2895,"name":"b0793 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.3305256258,"id":"node_81","children":[{"distance":0.4782372362,"id":"node_82","rowPos":638,"name":"b2370 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.4782372362,"id":"node_83","rowPos":2863,"name":"b0707 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.5086368895,"id":"node_84","children":[{"distance":0.5748175952,"id":"node_85","children":[{"distance":0.3749859298,"id":"node_86","children":[{"distance":0.3373304291,"id":"node_87","rowPos":219,"name":"b2480 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.3373304291,"id":"node_88","rowPos":4296,"name":"b1852 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.2214705125,"id":"node_89","children":[{"distance":0.3194313182,"id":"node_90","children":[{"distance":0.1714145283,"id":"node_91","rowPos":39,"name":"b1241 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.1714145283,"id":"node_92","rowPos":664,"name":"b2925 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.1962190988,"id":"node_93","children":[{"distance":0.2946267476,"id":"node_94","rowPos":598,"name":"b2779 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.1121933395,"id":"node_95","children":[{"distance":0.18243340810000003,"id":"node_96","rowPos":867,"name":"b1779 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.18243340810000003,"id":"node_97","rowPos":1780,"name":"b0903 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.5109781416,"id":"node_98","children":[{"distance":0.38391070550000006,"id":"node_99","children":[{"distance":0.392245107,"id":"node_100","rowPos":1699,"name":"b2215 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.392245107,"id":"node_101","rowPos":2001,"name":"b2216 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.2165618304,"id":"node_102","children":[{"distance":0.5595939822,"id":"node_103","rowPos":1001,"name":"b2988 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.5595939822,"id":"node_104","rowPos":2176,"name":"b3341 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.3355296621,"id":"node_105","children":[{"distance":1.376561446,"id":"node_106","children":[{"distance":0.696686202,"id":"node_107","rowPos":853,"name":"b1492 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.696686202,"id":"node_108","rowPos":4264,"name":"b4209 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.3902048872,"id":"node_109","children":[{"distance":0.9347835864999999,"id":"node_110","children":[{"distance":0.7482591745,"id":"node_111","rowPos":262,"name":"b0158 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.2047307906,"id":"node_112","children":[{"distance":0.5435283839,"id":"node_113","rowPos":3426,"name":"b2379 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.5435283839,"id":"node_114","rowPos":4152,"name":"b2380 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.9068156662,"id":"node_115","children":[{"distance":0.7762270948,"id":"node_116","rowPos":1577,"name":"b0677 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.7762270948,"id":"node_117","rowPos":2929,"name":"b0869 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":1.3502062309999998,"id":"node_118","children":[{"distance":1.324859918,"id":"node_119","children":[{"distance":1.159247377,"id":"node_120","rowPos":2962,"name":"b1003 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":1.159247377,"id":"node_121","rowPos":3058,"name":"b4524 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.7520045443,"id":"node_122","children":[{"distance":0.6453997817,"id":"node_123","children":[{"distance":0.5651720927,"id":"node_124","children":[{"distance":0.3209154717,"id":"node_125","children":[{"distance":0.20061540490000002,"id":"node_126","rowPos":60,"name":"b1002 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.05467875555,"id":"node_127","children":[{"distance":0.1459366494,"id":"node_128","rowPos":1983,"name":"b2597 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.1459366494,"id":"node_129","rowPos":4131,"name":"b1824 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.1567366503,"id":"node_130","children":[{"distance":0.3647942263,"id":"node_131","rowPos":2602,"name":"b1895 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.1667330554,"id":"node_132","children":[{"distance":0.19806117089999997,"id":"node_133","rowPos":1547,"name":"b0159 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.19806117089999997,"id":"node_134","rowPos":3079,"name":"b1381 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.12389477330000001,"id":"node_135","children":[{"distance":0.4900236537,"id":"node_136","children":[{"distance":0.4727845423,"id":"node_137","rowPos":775,"name":"b0904 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.4727845423,"id":"node_138","rowPos":1933,"name":"b2415 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.37711600050000005,"id":"node_139","children":[{"distance":0.5856921955000001,"id":"node_140","rowPos":3583,"name":"b2936 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.5856921955000001,"id":"node_141","rowPos":4076,"name":"b1454 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"},{"distance":0.5405247240000001,"id":"node_142","children":[{"distance":1.191578027,"id":"node_143","rowPos":1046,"name":"b0369 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.5202300454,"id":"node_144","children":[{"distance":0.6713479816,"id":"node_145","rowPos":2121,"name":"b3386 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"},{"distance":0.6713479816,"id":"node_146","rowPos":3497,"name":"b2642 (23)","clusterPos":23,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"","open":true,"weight":3,"lineStroke":"#003bff"}],"clusterPos":"23","name":"cluster_23","open":false},{"distance":0.7534132514,"id":"node_147","children":[{"distance":2.133169018,"id":"node_148","children":[{"distance":1.6602483270000001,"id":"node_149","children":[{"distance":0.8613499299,"id":"node_150","rowPos":1245,"name":"b0220 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.8613499299,"id":"node_151","rowPos":2787,"name":"b0478 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":1.3528156450000002,"id":"node_152","children":[{"distance":1.168782612,"id":"node_153","rowPos":1935,"name":"b3204 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":1.168782612,"id":"node_154","rowPos":3578,"name":"b2898 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":1.1492852709999999,"id":"node_155","children":[{"distance":1.294750118,"id":"node_156","children":[{"distance":0.9797336831000001,"id":"node_157","children":[{"distance":0.4151497904,"id":"node_158","children":[{"distance":0.8158484126,"id":"node_159","rowPos":665,"name":"b2097 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.45145205619999995,"id":"node_160","children":[{"distance":0.3643963564,"id":"node_161","rowPos":919,"name":"b3870 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.3643963564,"id":"node_162","rowPos":1866,"name":"b2501 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":0.3078115072,"id":"node_163","children":[{"distance":0.5628810009,"id":"node_164","children":[{"distance":0.3603056948,"id":"node_165","rowPos":885,"name":"b2904 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.3603056948,"id":"node_166","rowPos":888,"name":"b2905 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":0.3431809544,"id":"node_167","children":[{"distance":0.5800057413999999,"id":"node_168","rowPos":886,"name":"b2903 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.5800057413999999,"id":"node_169","rowPos":3741,"name":"b3547 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":0.9738203015000001,"id":"node_170","children":[{"distance":0.426379964,"id":"node_171","children":[{"distance":0.8105316206000001,"id":"node_172","rowPos":2123,"name":"b2914 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.8105316206000001,"id":"node_173","rowPos":3544,"name":"b2795 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":0.4117358512,"id":"node_174","children":[{"distance":0.4372052504,"id":"node_175","children":[{"distance":0.387970483,"id":"node_176","rowPos":3385,"name":"b2294 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.1730098704,"id":"node_177","children":[{"distance":0.21496061260000002,"id":"node_178","rowPos":2994,"name":"b1108 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.21496061260000002,"id":"node_179","rowPos":3296,"name":"b2007 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":0.277782022,"id":"node_180","children":[{"distance":0.5473937114,"id":"node_181","rowPos":1359,"name":"b2687 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.19880452029999998,"id":"node_182","children":[{"distance":0.348589191,"id":"node_183","rowPos":1854,"name":"b4226 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.348589191,"id":"node_184","rowPos":2489,"name":"b3035 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":1.09919418,"id":"node_185","children":[{"distance":1.157615094,"id":"node_186","children":[{"distance":1.2486727290000001,"id":"node_187","rowPos":868,"name":"b4493 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.8012494332,"id":"node_188","children":[{"distance":0.4474232962,"id":"node_189","rowPos":2877,"name":"b4515 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.1406463548,"id":"node_190","children":[{"distance":0.3067769414,"id":"node_191","rowPos":1017,"name":"b2507 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.3067769414,"id":"node_192","rowPos":1018,"name":"b2508 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":0.7967820922000001,"id":"node_193","children":[{"distance":0.78634576,"id":"node_194","children":[{"distance":0.8231599714,"id":"node_195","rowPos":118,"name":"b0396 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.8231599714,"id":"node_196","rowPos":1722,"name":"b1897 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":0.208561845,"id":"node_197","children":[{"distance":0.8484952761,"id":"node_198","children":[{"distance":0.5524486103,"id":"node_199","rowPos":3298,"name":"b2016 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.1067984299,"id":"node_200","children":[{"distance":0.44565018030000003,"id":"node_201","rowPos":1942,"name":"b2312 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.44565018030000003,"id":"node_202","rowPos":4153,"name":"b2381 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":0.5328106632,"id":"node_203","children":[{"distance":0.8681332233,"id":"node_204","rowPos":4145,"name":"b2142 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.1481990097,"id":"node_205","children":[{"distance":0.41970205390000004,"id":"node_206","children":[{"distance":0.3002321597,"id":"node_207","rowPos":1510,"name":"b0827 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.3002321597,"id":"node_208","rowPos":1949,"name":"b1849 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"},{"distance":0.393704649,"id":"node_209","children":[{"distance":0.32622956459999997,"id":"node_210","rowPos":1945,"name":"b2557 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"},{"distance":0.32622956459999997,"id":"node_211","rowPos":1946,"name":"b2499 (45)","clusterPos":45,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"","open":true,"weight":3,"lineStroke":"#ff1000"}],"clusterPos":"45","name":"cluster_45","open":false}],"clusterPos":null,"name":"","open":true}],"clusterPos":null,"name":"","open":true},{"distance":0.9086864505000001,"id":"node_212","children":[{"distance":2.728080414,"id":"node_213","children":[{"distance":1.505301099,"id":"node_214","children":[{"distance":1.944703781,"id":"node_215","rowPos":1226,"name":"b0382 (88)","clusterPos":88,"weight":3,"lineStroke":"#00ceff"},{"distance":1.944703781,"id":"node_216","rowPos":2166,"name":"b2741 (88)","clusterPos":88,"weight":3,"lineStroke":"#00ceff"}],"clusterPos":"88","name":"","open":true,"weight":3,"lineStroke":"#00ceff"},{"distance":1.241313931,"id":"node_217","children":[{"distance":2.208690949,"id":"node_218","rowPos":2683,"name":"b0122 (88)","clusterPos":88,"weight":3,"lineStroke":"#00ceff"},{"distance":0.9859971657,"id":"node_219","children":[{"distance":1.222693784,"id":"node_220","rowPos":995,"name":"b2947 (88)","clusterPos":88,"weight":3,"lineStroke":"#00ceff"},{"distance":0.4973891543,"id":"node_221","children":[{"distance":0.7253046293,"id":"node_222","rowPos":3692,"name":"b3362 (88)","clusterPos":88,"weight":3,"lineStroke":"#00ceff"},{"distance":0.7253046293,"id":"node_223","rowPos":4081,"name":"b4598 (88)","clusterPos":88,"weight":3,"lineStroke":"#00ceff"}],"clusterPos":"88","name":"","open":true,"weight":3,"lineStroke":"#00ceff"}],"clusterPos":"88","name":"","open":true,"weight":3,"lineStroke":"#00ceff"}],"clusterPos":"88","name":"","open":true,"weight":3,"lineStroke":"#00ceff"}],"clusterPos":"88","name":"cluster_88","open":false},{"distance":2.127950818,"id":"node_224","children":[{"distance":1.777801659,"id":"node_225","children":[{"distance":0.5890839672,"id":"node_226","children":[{"distance":1.6832488509999999,"id":"node_227","rowPos":3317,"name":"b2108 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.5024984886,"id":"node_228","children":[{"distance":1.180750362,"id":"node_229","rowPos":180,"name":"b3743 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.8116960001,"id":"node_230","children":[{"distance":0.369054362,"id":"node_231","rowPos":1575,"name":"b2615 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.369054362,"id":"node_232","rowPos":1947,"name":"b2500 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.2518427986,"id":"node_233","children":[{"distance":1.242401599,"id":"node_234","children":[{"distance":0.7780884204,"id":"node_235","rowPos":141,"name":"b2253 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.7780884204,"id":"node_236","rowPos":3350,"name":"b2178 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":1.104639303,"id":"node_237","children":[{"distance":0.9158507162,"id":"node_238","rowPos":2076,"name":"b3041 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.9158507162,"id":"node_239","rowPos":3612,"name":"b3038 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.5319945979,"id":"node_240","children":[{"distance":0.8539454385,"id":"node_241","children":[{"distance":1.328114441,"id":"node_242","children":[{"distance":1.3360799989999999,"id":"node_243","rowPos":3310,"name":"b2086 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.5377472005,"id":"node_244","children":[{"distance":0.7983327983999999,"id":"node_245","rowPos":3341,"name":"b2160 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.7983327983999999,"id":"node_246","rowPos":4227,"name":"b3100 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.7916326902999999,"id":"node_247","children":[{"distance":0.7504020389,"id":"node_248","children":[{"distance":0.48904398109999997,"id":"node_249","children":[{"distance":0.6331157299,"id":"node_250","rowPos":2346,"name":"b2620 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.6331157299,"id":"node_251","rowPos":3225,"name":"b1795 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.1622808463,"id":"node_252","children":[{"distance":0.9598788646,"id":"node_253","rowPos":4163,"name":"b2474 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.5051703208,"id":"node_254","children":[{"distance":0.45470854390000004,"id":"node_255","rowPos":1718,"name":"b1739 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.45470854390000004,"id":"node_256","rowPos":2926,"name":"b0865 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.6334182949,"id":"node_257","children":[{"distance":0.4756751192,"id":"node_258","children":[{"distance":0.3833231747,"id":"node_259","children":[{"distance":0.3801451611,"id":"node_260","rowPos":1521,"name":"b2684 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.3801451611,"id":"node_261","rowPos":2505,"name":"b3919 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.2041413093,"id":"node_262","children":[{"distance":0.5593270265,"id":"node_263","rowPos":1967,"name":"b2780 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.5593270265,"id":"node_264","rowPos":2009,"name":"b2820 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.4673053071,"id":"node_265","children":[{"distance":0.7718381479,"id":"node_266","rowPos":1216,"name":"b2622 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.3551824864,"id":"node_267","children":[{"distance":0.4166556615,"id":"node_268","rowPos":235,"name":"b2901 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.4166556615,"id":"node_269","rowPos":1365,"name":"b4129 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.4690334236,"id":"node_270","children":[{"distance":1.6852514669999998,"id":"node_271","children":[{"distance":1.363854988,"id":"node_272","rowPos":1214,"name":"b4505 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":1.363854988,"id":"node_273","rowPos":1742,"name":"b4023 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.5053434643,"id":"node_274","children":[{"distance":1.30505031,"id":"node_275","children":[{"distance":1.2387126800000001,"id":"node_276","rowPos":3247,"name":"b1836 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.1494491039,"id":"node_277","children":[{"distance":1.089263576,"id":"node_278","rowPos":2413,"name":"b2793 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":1.089263576,"id":"node_279","rowPos":3525,"name":"b2777 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.1770533317,"id":"node_280","children":[{"distance":1.276133894,"id":"node_281","children":[{"distance":1.090575765,"id":"node_282","rowPos":2022,"name":"b2784 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":1.090575765,"id":"node_283","rowPos":3577,"name":"b2897 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.7299704611000001,"id":"node_284","children":[{"distance":1.6367391980000001,"id":"node_285","rowPos":4235,"name":"b3150 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.3150042634,"id":"node_286","children":[{"distance":0.7558774738,"id":"node_287","children":[{"distance":0.5658574608,"id":"node_288","rowPos":715,"name":"b4319 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.5658574608,"id":"node_289","rowPos":2872,"name":"b0713 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"},{"distance":0.3676911807,"id":"node_290","children":[{"distance":0.9540437538000001,"id":"node_291","rowPos":1936,"name":"b2829 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.529181673,"id":"node_292","children":[{"distance":0.4248620808,"id":"node_293","rowPos":709,"name":"b4314 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"},{"distance":0.4248620808,"id":"node_294","rowPos":711,"name":"b4316 (51)","clusterPos":51,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"","open":true,"weight":3,"lineStroke":"#00ffde"}],"clusterPos":"51","name":"cluster_51","open":false}],"clusterPos":null,"name":"","open":true}],"clusterPos":null,"name":"","open":true};

                    var $tree = $.jqElem('div').css({width : '800px', height : '500px'}).kbaseTreechart(

                        {
                            lineStyle: 'square',
                            fixed : false,
                            dataset : tree,
                            displayStyle:'nt',
                            distance : 50,
                            layout : 'cluster'
                            //bias : 'leaf',
                        }

                    );

                    return {
                        title: 'Sample tree chart',
                        content: $tree.$elem,
                    }

                }

                function attach(node) {
                    return q.Promise(function (resolve) {
                        mount = node;
                        container = document.createElement('div');
                        mount.appendChild(container);
                        var rendered = render();

                        R.send('app', 'title', rendered.title);
                        $(container).append(rendered.content);

                        resolve();
                    });
                }
                function start(params) {
                    return q.Promise(function (resolve) {
                        resolve();
                    });
                }
                function stop(node) {
                    return q.Promise(function (resolve) {

                        resolve();
                    });
                }
                function detach(node) {
                    return q.Promise(function (resolve) {

                        resolve();
                    });
                }

                return {
                    attach: attach,
                    start: start,
                    stop: stop,
                    detach: detach
                };
            }


            return {
                create: function (config) {
                    return widget(config);
                }
            };
        }


        function setup(app) {
            app.addRoute({
                path: ['treechart'],
                widget: treechartWidget()
            });

        }
        function teardown() {
            // TODO: remove routes
            return false;
        }
        function start() {
            //
            return false;
        }
        function stop() {
            //
            return false;
        }
        return {
            setup: setup,
            teardown: teardown,
            start: start,
            stop: stop
        };
    });
